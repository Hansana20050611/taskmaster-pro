<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#6366f1">
    <title>TaskMaster Pro - AI Study Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Noto+Sans+Sinhala:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="dark-theme">
    <input type="checkbox" switch style="display:none;" id="haptic-trigger"/>
    <label for="haptic-label" id="haptic-label" style="display:none;"></label>
    
    <div id="aria-live" aria-live="polite" aria-atomic="true" style="position:absolute;left:-9999px;"></div>

    <header class="app-header glass-surface">
        <div class="header-wrapper">
            <div class="app-logo">
                <span class="logo-icon">üéì</span>
                <span class="logo-text">TaskMaster Pro</span>
            </div>
            <div class="header-controls">
                <select id="lang-selector" class="header-btn" aria-label="Language selection">
                    <option value="en">EN</option>
                    <option value="si">‡∑É‡∑í‡∂Ç</option>
                </select>
                <button id="theme-btn" class="header-btn" aria-label="Theme toggle" title="Toggle dark/light mode">
                    <span id="theme-icon">üåô</span>
                </button>
                <button id="reduce-motion-btn" class="header-btn" aria-label="Toggle reduced motion" title="Reduce animations">
                    <span>‚è±Ô∏è</span>
                </button>
                <button id="notifications-btn" class="header-btn" aria-label="Notifications">
                    <span>üîî</span>
                </button>
            </div>
        </div>
    </header>

    <main class="app-main">

        <section id="view-tasks" class="app-view" role="tabpanel" aria-labelledby="tab-tasks">
            <div class="view-header">
                <h2 class="view-title" data-en="My Tasks" data-si="‡∂∏‡∂ú‡∑ö ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∂±‡∑ä">My Tasks</h2>
                <button class="btn-primary" id="btn-add-task" data-en="New Task" data-si="‡∂±‡∑Ä ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫">
                    <span>+</span> New Task
                </button>
            </div>
            <div class="tasks-wrapper glass-surface">
                <div id="tasks-list" class="tasks-grid"></div>
            </div>
        </section>

        <section id="view-generator" class="app-view active-view" role="tabpanel" aria-labelledby="tab-generator">
            <div class="view-header">
                <h2 class="view-title" data-en="Flashcard Generator" data-si="‡∑Ü‡∑ä‡∂Ω‡∑ê‡∑Ç‡∑ä ‡∂ö‡∑è‡∂©‡∑ä‡∂¥‡∂≠‡∑ä ‡∂ã‡∂≠‡∑ä‡∂¥‡∑è‡∂Ø‡∂ö‡∂∫">Flashcard Generator</h2>
            </div>
            <div class="generator-panel glass-surface">
                <div class="input-group">
                    <label for="fc-subject" class="input-label" data-en="Subject" data-si="‡∑Ä‡∑í‡∑Ç‡∂∫">Subject</label>
                    <select id="fc-subject" class="input-field">
                        <option value="Physics" data-si="‡∂∑‡∑û‡∂≠‡∑í‡∂ö ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä">Physics</option>
                        <option value="Chemistry" data-si="‡∂ª‡∑É‡∑è‡∂∫‡∂± ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä">Chemistry</option>
                        <option value="Biology" data-si="‡∂¢‡∑ì‡∑Ä ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä">Biology</option>
                        <option value="Mathematics" data-si="‡∑É‡∂Ç‡∂∫‡∑î‡∂ö‡∑ä‡∂≠ ‡∂ú‡∂´‡∑í‡∂≠‡∂∫">Combined Mathematics</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="fc-topic" class="input-label" data-en="Topic" data-si="‡∂∏‡∑è‡∂≠‡∑ò‡∂ö‡∑è">Topic</label>
                    <input type="text" id="fc-topic" class="input-field" placeholder="e.g., Newton's Laws" data-si-placeholder="‡∂ã‡∂Ø‡∑è. ‡∂±‡∑í‡¶â‡∂ß‡∂±‡∑ä‡∂ú‡∑ö ‡∂±‡∑ì‡∂≠‡∑í">
                </div>
                <div class="input-group">
                    <label for="fc-count" class="input-label" data-en="Number of Cards" data-si="‡∂ö‡∑è‡∂©‡∑ä‡∂¥‡∂≠‡∑ä ‡∂ú‡∂´‡∂±">Number of Cards</label>
                    <select id="fc-count" class="input-field">
                        <option value="5">5 Cards</option>
                        <option value="10">10 Cards</option>
                        <option value="15">15 Cards</option>
                        <option value="20">20 Cards</option>
                    </select>
                </div>
                <button class="btn-primary btn-full" id="btn-generate" data-en="Generate with AI" data-si="Generate with AI">
                    <span>‚ú®</span> Generate with AI
                </button>
                <div id="generator-error" class="error-message" style="display: none;"></div>
            </div>
            <div id="cards-grid" class="flashcards-grid"></div>
        </section>

        <section id="view-chat" class="app-view" role="tabpanel" aria-labelledby="tab-chat">
            <div class="chat-panel glass-surface">
                <div class="chat-top">
                    <h2 class="view-title" data-en="AI Study Assistant" data-si="AI ‡∑É‡∑Ñ‡∑è‡∂∫‡∂ö">AI Study Assistant</h2>
                    <select id="chat-subject" class="input-field">
                        <option value="General" data-si="‡∑É‡∑è‡∂∏‡∑è‡∂±‡∑ä‚Äç‡∂∫">General</option>
                        <option value="Physics" data-si="‡∂∑‡∑û‡∂≠‡∑í‡∂ö ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä">Physics</option>
                        <option value="Chemistry" data-si="‡∂ª‡∑É‡∑è‡∂∫‡∂± ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä">Chemistry</option>
                        <option value="Biology" data-si="‡∂¢‡∑ì‡∑Ä ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä">Biology</option>
                        <option value="Mathematics" data-si="‡∑É‡∂Ç‡∂∫‡∑î‡∂ö‡∑ä‡∂≠ ‡∂ú‡∂´‡∑í‡∂≠‡∂∫">Mathematics</option>
                    </select>
                </div>
                <div id="chat-messages" class="chat-messages">
                    <div class="chat-msg bot-msg">
                        <div class="msg-avatar">ü§ñ</div>
                        <div class="msg-bubble">
                            <p data-en="Hello! I'm your AI study assistant. Ask me anything about your subjects!" data-si="‡∂Ü‡∂∫‡∑î‡∂∂‡∑ù‡∑Ä‡∂±‡∑ä! ‡∂î‡∂∂‡∑ö ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∂∫‡∂±‡∂∫ ‡∂ú‡∑ê‡∂± ‡∂ï‡∂±‡∑ë‡∂∏ ‡∂Ø‡∑ô‡∂∫‡∂ö‡∑ä ‡∂Ö‡∑Ñ‡∂±‡∑ä‡∂±...">Hello! I'm your AI study assistant. Ask me anything!</p>
                        </div>
                    </div>
                </div>
                <div class="chat-bottom">
                    <textarea id="chat-input" class="chat-textarea" placeholder="Ask a question..." data-si-placeholder="‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫‡∂ö‡∑ä ‡∂á‡∑É‡∑í‡∂±‡∑ä‡∂±..."></textarea>
                    <button id="btn-send" class="btn-send-chat" aria-label="Send message">
                        <span>‚û§</span>
                    </button>
                </div>
            </div>
        </section>

        <section id="view-timer" class="app-view" role="tabpanel" aria-labelledby="tab-timer">
            <div class="timer-panel glass-surface">
                <div class="timer-visual">
                    <svg class="timer-svg" viewBox="0 0 200 200">
                        <circle cx="100" cy="100" r="85" class="timer-track"></circle>
                        <circle cx="100" cy="100" r="85" class="timer-path" id="timer-circle"></circle>
                    </svg>
                    <div class="timer-center">
                        <div class="timer-text" id="timer-text">25:00</div>
                        <div class="timer-status" data-en="Focus Session" data-si="‡∂Ö‡∑Ä‡∂∞‡∑è‡∂±‡∂∫ ‡∂Ø‡∑ê‡∂ª‡∑ì‡∂∏‡∑ö ‡∑É‡∑ê‡∑É‡∑í‡∂∫">Focus Session</div>
                    </div>
                </div>
                <div class="timer-buttons">
                    <button class="btn-timer" id="btn-timer-start" data-en="Start" data-si="‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±">
                        <span>‚ñ∂Ô∏è</span> Start
                    </button>
                    <button class="btn-timer btn-secondary" id="btn-timer-reset" data-en="Reset" data-si="‡∂±‡∑ê‡∑Ä‡∂≠ ‡∑É‡∂ö‡∑É‡∂±‡∑ä‡∂±">
                        <span>‚Üª</span> Reset
                    </button>
                </div>
                <div class="timer-details">
                    <div class="timer-detail-item">
                        <div class="detail-value" id="timer-round">1</div>
                        <div class="detail-label" data-en="Current Round" data-si="‡∑Ä‡∂ª‡∑ä‡∂≠‡∂∏‡∑è‡∂± ‡∑Ä‡∂ß‡∂∫">Current Round</div>
                    </div>
                    <div class="timer-detail-item">
                        <div class="detail-value" id="timer-completed">0</div>
                        <div class="detail-label" data-en="Sessions Done" data-si="‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∑É‡∑ê‡∑É‡∑í">Sessions Done</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="view-stats" class="app-view" role="tabpanel" aria-labelledby="tab-stats">
            <div class="view-header">
                <h2 class="view-title" data-en="Your Progress" data-si="‡∂î‡∂∂‡∂ú‡∑ö ‡∂¥‡∑ä‚Äç‡∂ª‡∂ú‡∂≠‡∑í‡∂∫">Your Progress</h2>
            </div>
            <div class="stats-container">
                <div class="stat-box glass-surface">
                    <div class="stat-emoji">‚úÖ</div>
                    <div class="stat-num" id="stat-tasks">0</div>
                    <div class="stat-desc" data-en="Tasks Completed" data-si="‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∂±‡∑ä">Tasks Completed</div>
                </div>
                <div class="stat-box glass-surface">
                    <div class="stat-emoji">üé¥</div>
                    <div class="stat-num" id="stat-cards">0</div>
                    <div class="stat-desc" data-en="Cards Learned" data-si="‡∂â‡∂ú‡∑ô‡∂± ‡∂ú‡∂≠‡∑ä ‡∂ö‡∑è‡∂©‡∑ä‡∂¥‡∂≠‡∑ä">Cards Learned</div>
                </div>
                <div class="stat-box glass-surface">
                    <div class="stat-emoji">‚è±Ô∏è</div>
                    <div class="stat-num" id="stat-hours">0h</div>
                    <div class="stat-desc" data-en="Study Time" data-si="‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∂± ‡∂ö‡∑è‡∂Ω‡∂∫">Study Time</div>
                </div>
                <div class="stat-box glass-surface">
                    <div class="stat-emoji">üî•</div>
                    <div class="stat-num" id="stat-streak">0</div>
                    <div class="stat-desc" data-en="Day Streak" data-si="‡∂Ø‡∑í‡∂±‡∑ö ‡∑É‡∑ä‡∂ß‡∑ä‚Äç‡∂ª‡∑ì‡∂ö">Day Streak</div>
                </div>
            </div>
        </section>

    </main>

    <nav class="bottom-dock glass-surface" role="tablist" aria-label="Main navigation">
        <button id="tab-tasks" class="dock-btn" data-tab="tasks" role="tab" aria-selected="false" aria-controls="view-tasks" data-en="Tasks" data-si="‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∂±‡∑ä">
            <span class="dock-icon">üìù</span>
            <span class="dock-label">Tasks</span>
        </button>
        <button id="tab-generator" class="dock-btn active" data-tab="generator" role="tab" aria-selected="true" aria-controls="view-generator" data-en="Generator" data-si="‡∂¢‡∂±‡∂ö‡∂∫">
            <span class="dock-icon">üé¥</span>
            <span class="dock-label">Generator</span>
        </button>
        <button id="tab-chat" class="dock-btn" data-tab="chat" role="tab" aria-selected="false" aria-controls="view-chat" data-en="Chat" data-si="‡∑É‡∂Ç‡∑Ä‡∑è‡∂Ø‡∂∫">
            <span class="dock-icon">üí¨</span>
            <span class="dock-label">Chat</span>
        </button>
        <button id="tab-timer" class="dock-btn" data-tab="timer" role="tab" aria-selected="false" aria-controls="view-timer" data-en="Timer" data-si="‡∂ß‡∂∫‡∑í‡∂∏‡∂ª‡∑ä">
            <span class="dock-icon">‚è±Ô∏è</span>
            <span class="dock-label">Timer</span>
        </button>
        <button id="tab-stats" class="dock-btn" data-tab="stats" role="tab" aria-selected="false" aria-controls="view-stats" data-en="Stats" data-si="‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∂Ç‡∂ö‡∂±">
            <span class="dock-icon">üìä</span>
            <span class="dock-label">Stats</span>
        </button>
    </nav>

    <div id="task-modal" class="app-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-container glass-surface" role="dialog" aria-modal="true" aria-labelledby="task-modal-title">
            <div class="modal-top">
                <h3 id="task-modal-title" data-en="Create New Task" data-si="‡∂±‡∑Ä ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫ ‡∑É‡∂ö‡∑É‡∂±‡∑ä‡∂±">Create New Task</h3>
                <button class="modal-close" aria-label="Close" data-en="Close" data-si="‡∑Ä‡∑É‡∂±‡∑ä‡∂±">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="inp-task-title" class="input-label" data-en="Task Title" data-si="‡∂ö‡∑è‡∂ª‡∑ä‡∂∫ ‡∑É‡∑í‡∂ª‡∑ê‡∑É‡∑í">Task Title</label>
                    <input type="text" id="inp-task-title" class="input-field" placeholder="Enter task title" data-si-placeholder="‡∂ö‡∑è‡∂ª‡∑ä‡∂∫ ‡∑É‡∑í‡∂ª‡∑ê‡∑É‡∑í ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±" required>
                </div>
                <div class="input-group">
                    <label for="inp-task-desc" class="input-label" data-en="Description" data-si="‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª‡∂´‡∂∫">Description</label>
                    <textarea id="inp-task-desc" class="input-field" rows="3" placeholder="Add details..." data-si-placeholder="‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂±..."></textarea>
                </div>
                <div class="input-group">
                    <label for="inp-task-subj" class="input-label" data-en="Subject" data-si="‡∑Ä‡∑í‡∑Ç‡∂∫">Subject</label>
                    <select id="inp-task-subj" class="input-field">
                        <option value="Physics" data-si="‡∂∑‡∑û‡∂≠‡∑í‡∂ö ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä">Physics</option>
                        <option value="Chemistry" data-si="‡∂ª‡∑É‡∑è‡∂∫‡∂± ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä">Chemistry</option>
                        <option value="Biology" data-si="‡∂¢‡∑ì‡∑Ä ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä">Biology</option>
                        <option value="Mathematics" data-si="‡∑É‡∂Ç‡∂∫‡∑î‡∂ö‡∑ä‡∂≠ ‡∂ú‡∂´‡∑í‡∂≠‡∂∫">Mathematics</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="inp-task-priority" class="input-label" data-en="Priority" data-si="‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑î‡∂õ‡∂≠‡∑è‡∑Ä">Priority</label>
                    <select id="inp-task-priority" class="input-field">
                        <option value="low" data-si="‡∂Ö‡∂©‡∑î">Low</option>
                        <option value="medium" selected data-si="‡∂∏‡∂∞‡∑ä‚Äç‡∂∫‡∂∏">Medium</option>
                        <option value="high" data-si="‡∂â‡∑Ñ‡∑Ö">High</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary modal-cancel" data-en="Cancel" data-si="‡∂Ö‡∑Ä‡∂Ω‡∂Ç‡∂ú‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂±">Cancel</button>
                <button class="btn-primary" id="btn-save-task" data-en="Save Task" data-si="‡∂ö‡∑è‡∂ª‡∑ä‡∂∫ ‡∑É‡∑î‡∂ª‡∂ö‡∑í‡∂±‡∑ä‡∂±">Save Task</button>
            </div>
        </div>
    </div>

    <div id="loader-overlay" class="loader-screen">
        <div class="loader-spin"></div>
    </div>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="script.js"></script>
</body>
</html>