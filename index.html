<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=5.0, user-scalable=yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#667eea">
  <meta name="description" content="TaskMaster Pro - AI Study Assistant with Pomodoro Timer">
  
  <title>TaskMaster Pro - ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∂∫‡∂± ·à®·ã≥·âµ</title>
  
  <!-- Fonts: Premium Sinhala + English -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéì</text></svg>">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><text y='135' font-size='180'>üéì</text></svg>">
  
  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">
</head>

<body class="dark-theme" data-font="si">
  <!-- Haptic Trigger (iOS) -->
  <input type="checkbox" switch style="display:none;" id="haptic-trigger"/>
  <label for="haptic-trigger" id="haptic-label" style="display:none;"></label>
  
  <!-- ARIA Live Region -->
  <div id="aria-live" aria-live="polite" aria-atomic="true" style="position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden;"></div>
  
  <!-- Floating Header -->
  <header class="app-header glass-surface">
    <div class="header-wrapper">
      <div class="app-logo">
        <span class="logo-emoji" aria-hidden="true">üéì</span>
        <span class="logo-title" data-i18n="appTitle">TaskMaster Pro</span>
      </div>
      
      <div class="header-actions">
        <!-- Language Toggle -->
        <button class="header-control font-btn" data-font="en" title="English" aria-label="Switch to English">EN</button>
        <button class="header-control font-btn active" data-font="si" title="‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω" aria-label="Switch to Sinhala">‡∑É‡∑í‡∂Ç</button>
        
        <!-- Theme Toggle -->
        <button id="theme-btn" class="header-control" aria-label="Toggle theme" aria-pressed="false" title="Dark/Light mode">
          <span id="theme-icon">üåô</span>
        </button>
        
        <!-- Accessibility Toggles -->
        <button id="reduce-motion-btn" class="header-control" aria-label="Reduce motion" aria-pressed="false" title="‡∑É‡∑í‡∂Ç‡¶π‡∂Ω ‡∂Ö‡∂±‡∑î‡∑Ä‡∑è‡∂Ø">
          <span>üé¨</span>
        </button>
        <button id="reduce-transparency-btn" class="header-control" aria-label="Reduce transparency" aria-pressed="false" title="Reduce blur">
          <span>‚ú®</span>
        </button>
      </div>
    </div>
  </header>
  
  <!-- Main Content -->
  <main class="app-main" role="main">
    
    <!-- TAB 1: Tasks -->
    <section id="view-tasks" class="app-view" role="tabpanel" aria-labelledby="tab-tasks" aria-hidden="true">
      <div class="view-header">
        <h2 class="view-title" data-i18n="myTasks">üìù ‡∂∏‡∂ú‡∑ö ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∂±‡∑ä</h2>
        <button class="btn-primary" id="btn-add-task" aria-label="Add new task">
          <span>+</span> <span data-i18n="newTask">‡∂±‡∑Ä ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫</span>
        </button>
      </div>
      
      <!-- Task Filter Bar -->
      <div class="tasks-filter-bar glass-surface">
        <button class="filter-btn active" data-filter="today" data-i18n="today">‡∂Ö‡∂Ø</button>
        <button class="filter-btn" data-filter="upcoming" data-i18n="upcoming">‡∂â‡∂Ø‡∑í‡∂ª‡∑í‡∂∫‡∂ß ‡∂ë‡∂±</button>
        <button class="filter-btn" data-filter="overdue" data-i18n="overdue">‡∂â‡∂ö‡∑î‡∂≠‡∑ä ‡∑Ä‡∑ñ</button>
        <button class="filter-btn" data-filter="all" data-i18n="all">‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω</button>
      </div>
      
      <!-- Tasks Container -->
      <div class="tasks-wrapper glass-surface">
        <div id="tasks-list" class="tasks-grid"></div>
      </div>
      
      <!-- Empty State -->
      <div id="tasks-empty" class="empty-state" style="display:none;">
        <div class="empty-icon">‚úì</div>
        <h3 data-i18n="noTasks">‡∂≠‡∑Ä‡∂∏‡∂≠‡∑ä ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∂±‡∑ä ‡∂±‡∑ê‡∂≠</h3>
        <p data-i18n="createFirstTask">‡∂ú‡∑ê‡∂ß‡∑Ö‡∑î ‡∑É‡∑Ñ‡∑í‡∂≠‡∑Ä ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫ ‡∑É‡∑è‡∂Ø‡∂±‡∑ä‡∂±</p>
      </div>
    </section>
    
    <!-- TAB 2: Generator (Flashcards) -->
    <section id="view-generator" class="app-view active-view" role="tabpanel" aria-labelledby="tab-generator" aria-hidden="false">
      <div class="view-header">
        <h2 class="view-title" data-i18n="flashcardGenerator">üé¥ ‡∑Ü‡∑ä‡∂Ω‡∑ë‡∑Ç‡∑ä‡∂ö‡∑è‡∂ª‡∑ä‡∂©‡∑ä ‡∂ã‡∂≠‡∑ä‡∂¥‡∑è‡∂Ø‡∂ö</h2>
      </div>
      
      <div class="generator-panel glass-surface">
        <div class="input-group">
          <label for="fc-subject" class="input-label" data-i18n="subject">‡∑Ä‡∑í‡∑Ç‡∂∫</label>
          <select id="fc-subject" class="input-field">
            <option value="Chemistry" data-i18n="chemistry">‡∂ª‡∑É‡∑è‡∂∫‡∂±‡§∂‡∑è‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∂∫</option>
            <option value="Physics" data-i18n="physics">‡∂∑‡∑û‡∂≠‡∑í‡∂ö‡™∂‡∑è‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∂∫</option>
            <option value="Biology" data-i18n="biology">‡∂¢‡∑ì‡∂ª‡∑ä‡∂´‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è</option>
            <option value="Mathematics" data-i18n="mathematics">‡∂ú‡∂´‡∑í‡∂≠‡∂∫</option>
            <option value="History" data-i18n="history">‡∂â‡∂≠‡∑í‡∑Ñ‡∑è‡∑É‡∂∫</option>
          </select>
        </div>
        
        <div class="input-group">
          <label for="fc-topic" class="input-label" data-i18n="topic">‡∂∏‡∑è‡∂≠‡∑ò‡∂ö‡∑è</label>
          <input type="text" id="fc-topic" class="input-field" placeholder="‡∂ã‡∂Ø‡∑è: S-block ‡∂∏‡∑ñ‡∂Ω‡∂Ø‡∑ä‚Äç‡∂ª‡∑Ä‡∑ä‚Äç‡∂∫" data-i18n-placeholder="topicExample">
        </div>
        
        <div class="input-group">
          <label for="fc-count" class="input-label" data-i18n="cardCount">‡∂ö‡∑è‡∂©‡∑ä‡∂¥‡∂≠‡∑ä ‡∂ú‡∂´‡∂±</label>
          <select id="fc-count" class="input-field">
            <option value="5">5 ‡∂ö‡∑è‡∂©‡∑ä‡∂¥‡∂≠‡∑ä</option>
            <option value="10">10 ‡∂ö‡∑è‡∂©‡∑ä‡∂¥‡∂≠‡∑ä</option>
            <option value="15">15 ‡∂ö‡∑è‡∂©‡∑ä‡∂¥‡∂≠‡∑ä</option>
            <option value="20">20 ‡∂ö‡∑è‡∂©‡∑ä‡∂¥‡∂≠‡∑ä</option>
          </select>
        </div>
        
        <button class="btn-primary btn-block" id="btn-generate" aria-label="Generate flashcards">
          <span>‚ú®</span> <span data-i18n="generateAI">AI ‡∑É‡∂∏‡∂ü ‡∂¢‡∂±‡∂±‡∂∫ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</span>
        </button>
      </div>
      
      <div id="cards-grid" class="flashcards-grid"></div>
      <div id="generator-error" class="error-message" style="display:none;"></div>
    </section>
    
    <!-- TAB 3: AI Chat -->
    <section id="view-chat" class="app-view" role="tabpanel" aria-labelledby="tab-chat" aria-hidden="true">
      <div class="chat-panel glass-surface">
        <div class="chat-header">
          <h2 class="view-title" data-i18n="aiAssistant">üí¨ AI ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∂∫‡∂± ·à®‡∂≥‡∑î‡∑Ä‡∑è</h2>
          <select id="chat-subject" class="input-field">
            <option value="General" data-i18n="general">‡∑É‡∑è‡∂∏‡∑è‡∂±‡∑ä‚Äç‡∂∫</option>
            <option value="Mathematics" data-i18n="mathematics">‡∂ú‡∂´‡∑í‡∂≠‡∂∫</option>
            <option value="Physics" data-i18n="physics">‡∂∑‡∑û‡∂≠‡∑í‡∂ö‡∑Å‡∑è‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∂∫</option>
            <option value="Chemistry" data-i18n="chemistry">‡∂ª‡∑É‡∑è‡∂∫‡∂±‡∑Å‡∑è‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∂∫</option>
            <option value="Biology" data-i18n="biology">‡∂¢‡∑ì‡∂ª‡∑ä‡∂´‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è</option>
          </select>
        </div>
        
        <div id="chat-messages" class="chat-messages" role="log" aria-label="Chat messages">
          <div class="chat-msg bot-msg">
            <div class="msg-avatar">ü§ñ</div>
            <div class="msg-bubble">
              <p data-i18n="chatGreeting">‡∂Ü‡∂∫‡∑î‡∂∂‡∑ù‡∑Ä‡∂±‡∑ä! ‡∂î‡∂∂‡∂ú‡∑ö AI ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∂∫‡∂± ·à®‡∂≥‡∑î‡∑Ä‡∑è ‡∂∫. ‡∂î‡∂∂‡∂ú‡∑ö ‡∑Ä‡∑í‡∑Ç‡∂∫‡∂±‡∑ä ‡∂ú‡∑ê‡∂± ‡∂ö‡∑í‡∑É‡∑í‡∑Ä‡∂ö‡∑ä ‡∑Ä‡∑í‡∂∏‡∑É‡∂±‡∑ä‡∂±!</p>
            </div>
          </div>
        </div>
        
        <div class="chat-bottom">
          <textarea id="chat-input" class="chat-textarea" placeholder="‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶∏‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®..." rows="2" aria-label="Type your question"></textarea>
          <button id="btn-send" class="btn-send-chat" aria-label="Send message">
            <span>‚û§</span>
          </button>
        </div>
      </div>
      <div id="loading-indicator" class="loading-overlay" style="display:none;">
        <div class="loader"></div>
      </div>
    </section>
    
    <!-- TAB 4: Pomodoro Timer -->
    <section id="view-timer" class="app-view" role="tabpanel" aria-labelledby="tab-timer" aria-hidden="true">
      <div class="timer-panel glass-surface">
        <div class="timer-visual">
          <svg class="timer-svg" viewBox="0 0 200 200" aria-hidden="true">
            <circle cx="100" cy="100" r="85" class="timer-track"></circle>
            <circle cx="100" cy="100" r="85" class="timer-path" id="timer-circle"></circle>
          </svg>
          <div class="timer-center">
            <div class="timer-text" id="timer-text">25:00</div>
            <div class="timer-status" data-i18n="focusSession">‡∂ú‡∂≠‡∑í‡∂Ω‡∂≠‡∑è ‡∑É‡∑ê‡∑É‡∑í‡∂∫</div>
          </div>
        </div>
        
        <div class="timer-buttons">
          <button class="btn-timer" id="btn-timer-start" aria-label="Start timer">
            <span>‚ñ∂Ô∏è</span> <span data-i18n="start">‡∂¥‡∂ß‡∂±‡∑ä ‡∂ú‡∂±‡∑ä‡∂±</span>
          </button>
          <button class="btn-timer btn-secondary" id="btn-timer-reset" aria-label="Reset timer">
            <span>‚Üª</span> <span data-i18n="reset">‡∂±‡∑ê‡∑Ä‡∂≠ ‡∑É‡∂ö‡∑É‡∂±‡∑ä‡∂±</span>
          </button>
        </div>
        
        <div class="timer-details">
          <div class="timer-detail-item">
            <div class="detail-value" id="timer-round">1</div>
            <div class="detail-label" data-i18n="currentRound">‡∑Ä‡∂ª‡∑ä‡∂≠‡∂∏‡∑è‡∂± ‡∑Ä‡∂ß‡∂∫</div>
          </div>
          <div class="timer-detail-item">
            <div class="detail-value" id="timer-completed">0</div>
            <div class="detail-label" data-i18n="sessionsDone">‡∑É‡∑ê‡∑É‡∑í ‡∑É‡∑í‡∂Ø‡∑î ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø</div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- TAB 5: Statistics -->
    <section id="view-stats" class="app-view" role="tabpanel" aria-labelledby="tab-stats" aria-hidden="true">
      <div class="view-header">
        <h2 class="view-title" data-i18n="progress">üìä ‡∂î‡∂∂‡∂ú‡∑ö ‡∂¥‡∑ä‚Äç‡∂ª‡∂ú‡∂≠‡∑í‡∂∫</h2>
      </div>
      
      <div class="stats-container">
        <div class="stat-box glass-surface">
          <div class="stat-emoji">‚úÖ</div>
          <div class="stat-num" id="stat-tasks">0</div>
          <div class="stat-desc" data-i18n="tasksCompleted">‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∂±‡∑ä ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´</div>
        </div>
        
        <div class="stat-box glass-surface">
          <div class="stat-emoji">üé¥</div>
          <div class="stat-num" id="stat-cards">0</div>
          <div class="stat-desc" data-i18n="cardsLearned">‡∂ö‡∑è‡∂©‡∑ä‡∂¥‡∂≠‡∑ä ‡∂â‡∂ú‡∑ô‡∂± ‡∂ú‡∑ô‡∂±</div>
        </div>
        
        <div class="stat-box glass-surface">
          <div class="stat-emoji">‚è±Ô∏è</div>
          <div class="stat-num" id="stat-hours">0h</div>
          <div class="stat-desc" data-i18n="studyTime">‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∂∫‡∂± ‡∂ö‡∑è‡∂Ω‡∂∫</div>
        </div>
        
        <div class="stat-box glass-surface">
          <div class="stat-emoji">üî•</div>
          <div class="stat-num" id="stat-streak">0</div>
          <div class="stat-desc" data-i18n="dayStreak">‡∂Ø‡∑í‡∂± ‡∂ú‡∂´‡∂±</div>
        </div>
      </div>
    </section>
    
  </main>
  
  <!-- Bottom Navigation Dock -->
  <nav class="bottom-dock glass-surface" role="tablist" aria-label="‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∑É‡∂≥‡∑Ñ‡∂±" aria-orientation="horizontal">
    <button id="tab-tasks" class="dock-btn" data-tab="tasks" role="tab" aria-selected="false" aria-controls="view-tasks" aria-label="‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∂±‡∑ä">
      <span class="dock-emoji">üìù</span>
      <span class="dock-name" data-i18n="tasks">‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∂±‡∑ä</span>
      <span class="indicator"></span>
    </button>
    
    <button id="tab-generator" class="dock-btn active" data-tab="generator" role="tab" aria-selected="true" aria-controls="view-generator" aria-label="‡∂¢‡∂±‡∂ö">
      <span class="dock-emoji">üé¥</span>
      <span class="dock-name" data-i18n="generator">‡∂¢‡∂±‡∂ö</span>
      <span class="indicator"></span>
    </button>
    
    <button id="tab-chat" class="dock-btn" data-tab="chat" role="tab" aria-selected="false" aria-controls="view-chat" aria-label="‡∑É‡∂∂‡∂≥‡∂≠‡∑è‡∑Ä">
      <span class="dock-emoji">üí¨</span>
      <span class="dock-name" data-i18n="chat">‡∑É‡∂∂‡∂≥‡∂≠‡∑è‡∑Ä</span>
      <span class="indicator"></span>
    </button>
    
    <button id="tab-timer" class="dock-btn" data-tab="timer" role="tab" aria-selected="false" aria-controls="view-timer" aria-label="‡∂ß‡∂∫‡∑í‡∂∏‡∂ª‡∂∫">
      <span class="dock-emoji">‚è±Ô∏è</span>
      <span class="dock-name" data-i18n="timer">‡∂ß‡∂∫‡∑í‡∂∏‡∂ª‡∂∫</span>
      <span class="indicator"></span>
    </button>
    
    <button id="tab-stats" class="dock-btn" data-tab="stats" role="tab" aria-selected="false" aria-controls="view-stats" aria-label="‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä‡∂ß">
      <span class="dock-emoji">üìä</span>
      <span class="dock-name" data-i18n="stats">‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä‡∂ß</span>
      <span class="indicator"></span>
    </button>
  </nav>
  
  <!-- Task Creation Modal -->
  <div id="task-modal" class="app-modal" role="dialog" aria-modal="true" aria-labelledby="task-modal-title">
    <div class="modal-backdrop"></div>
    <div class="modal-container glass-surface">
      <div class="modal-top">
        <h3 id="task-modal-title" data-i18n="createTask">‡∂±‡∑Ä ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫ ‡∑É‡∑ë‡∂Ø‡∑î‡∂∏‡∑ä</h3>
        <button id="modal-close" class="modal-x" aria-label="Close">√ó</button>
      </div>
      
      <div class="modal-mid">
        <div class="input-group">
          <label for="inp-task-title" class="input-label" data-i18n="taskTitle">‡∂ö‡∑è‡∂ª‡∑ä‡∂∫ ‡∂∏‡∑è‡∂≠‡∑ò‡∂ö‡∑è</label>
          <input type="text" id="inp-task-title" class="input-field" placeholder="‡∂ö‡∑è‡∂ª‡∑ä‡∂∫ ‡∂á‡∂≠‡∑î‡∂Ω‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±" required>
        </div>
        
        <div class="input-group">
          <label for="inp-task-desc" class="input-label" data-i18n="description">‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª‡∂∫ (‡∑Ä‡∑í‡∂ö‡∂Ω‡∑ä‡∂¥‡∑ì‡∂∫)</label>
          <textarea id="inp-task-desc" class="input-field" rows="3" placeholder="‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª‡∂´ ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±..."></textarea>
        </div>
        
        <div class="input-group">
          <label for="inp-task-priority" class="input-label" data-i18n="priority">‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑î‡∂õ‡∂≠‡∑è‡∑Ä</label>
          <select id="inp-task-priority" class="input-field">
            <option value="low" data-i18n="low">‡∂¥‡∑Ñ‡∑Ö ‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑î‡∂õ‡∂≠‡∑è‡∑Ä</option>
            <option value="medium" selected data-i18n="medium">‡∂∏‡∂∞‡∑ä‚Äç‡∂∫‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑î‡∂õ‡∂≠‡∑è‡∑Ä</option>
            <option value="high" data-i18n="high">‡∂â‡∑Ñ‡∑Ö ‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑î‡∂õ‡∂≠‡∑è‡∑Ä</option>
          </select>
        </div>
      </div>
      
      <div class="modal-bot">
        <button class="btn-secondary modal-cancel" data-i18n="cancel">‡∂Ö‡∑Ä‡∂Ω‡∂Ç‡∂ú‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
        <button class="btn-primary" id="btn-save-task" data-i18n="saveTask">‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫ ‡∑É‡∑î‡∂ª‡∂ö‡∑í‡∂±‡∑ä‡∂±</button>
      </div>
    </div>
  </div>
  
  <!-- Scripts -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <script src="script.js"></script>
</body>
</html>
